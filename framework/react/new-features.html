<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React18 新特性 | 全栈小册</title>
    <meta name="description" content="前端进阶开发技巧，浏览器扩展开发技巧，React与Vue开发技巧，前端全链路学习网站">
    <link rel="preload stylesheet" href="../../assets/style.4c5ac438.css" as="style">
    
    <script type="module" src="../../assets/app.6591aa99.js"></script>
    <link rel="preload" href="../../assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.27021b64.js">
    <link rel="modulepreload" href="/assets/chunks/dayjs.min.6dcbab11.js">
    <link rel="modulepreload" href="/assets/chunks/getTag.55064484.js">
    <link rel="modulepreload" href="/assets/chunks/isObjectLike.46b91259.js">
    <link rel="modulepreload" href="/assets/chunks/Serializer.fad5b415.js">
    <link rel="modulepreload" href="/assets/chunks/theme.09797e8b.js">
    <link rel="modulepreload" href="/assets/chunks/commonjsHelpers.725317a4.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-c0b17d02.7350939e.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-d6f8fe3a.37a08941.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-v2-58f49b84.b6748455.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-dedf2781.f94c7c90.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-e0ffc2d1.8ef7e8f0.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-088dbd90.5fc7fb8b.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-64895a6e.0851c2e0.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-3fca7ce7.1f315e47.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-0ca4be02.bfc40c6b.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-e13af0f0.6c3a6664.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-84aa38e3.f026d0f3.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-a8cc8886.d9782f13.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-802a48d3.2fab4ddf.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-9a586ac6.6e91e898.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-96f2b9df.a8960b9f.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-adaa34f8.2bc907b9.js">
    <link rel="modulepreload" href="/assets/chunks/flowchart-elk-definition-56584a6c.9a1f9561.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-1a90b03d.1daf5b69.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-57868176.f7092908.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-a7f8e230.a04e6e98.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.ade1a5ba.js">
    <link rel="modulepreload" href="/assets/chunks/Contributors.vue_vue_type_script_setup_true_lang.052e419c.js">
    <link rel="modulepreload" href="/assets/framework_react_new-features.md.b5a48712.lean.js">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="前端工作技巧，React专栏，Vue专栏，Umijs专栏，浏览器扩展，Ant Design Pro专栏">
    <meta name="author" content="dapan">
    <meta name="google-site-verification" content="8C08prB1osC3jsMbYZjmrkWEIM1zduj1OxedQjghNxs">
    <meta name="baidu-site-verification" content="codeva-xf7u8GA3Wp">
    <meta name="360-site-verification" content="37fc981df313cb2376c89f6fded04cfc">
    <meta name="msvalidate.01" content="95080530C3B969C7083402BB727761AA">
    <meta property="og:type" content="article">
    <meta name="application-name" content="dapan">
    <meta name="apple-mobile-web-app-title" content="dapan">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="shortcut icon" href="/favicon.ico">
    
    
    
    <link rel="preconnect" crossorigin="anonymous" href="https://fonts.googleapis.com/">
    <link rel="preconnect" crossorigin="anonymous" href="https://fonts.gstatic.com/">
    <link rel="stylesheet" href="../../gitalk/dist/gitalk.css">
    <script src="../../gitalk/dist/gitalk.min.js"></script>
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"dark",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <link rel="manifest" href="/manifest.webmanifest">
    <script id="vite-plugin-pwa:register-sw" src="../../registerSW.js"></script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6c29af8f=""><!--[--><!--]--><!--[--><span tabindex="-1" data-v-13360153=""></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-13360153=""> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6c29af8f="" data-v-d07a9596=""><div class="VPNavBar has-sidebar" data-v-d07a9596="" data-v-1ad84f55=""><div class="container" data-v-1ad84f55=""><div class="title" data-v-1ad84f55=""><div class="VPNavBarTitle has-sidebar" data-v-1ad84f55="" data-v-bb9b7ccd=""><a class="title" href="../../index.html" data-v-bb9b7ccd=""><!--[--><!--]--><!--[--><img class="VPImage logo" src="../../logo.svg" alt="" data-v-570a7bfc=""><!--]--><!--[-->全栈小册<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-1ad84f55=""><div class="curtain" data-v-1ad84f55=""></div><div class="content-body" data-v-1ad84f55=""><!--[--><!--]--><div class="VPNavBarSearch search" data-v-1ad84f55=""><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewbox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">请输入关键词</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-1ad84f55="" data-v-6f18f6d8=""><span id="main-nav-aria-label" class="visually-hidden" data-v-6f18f6d8="">Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f18f6d8="" data-v-e09eaf05=""><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e09eaf05=""><span class="text" data-v-e09eaf05=""><!----><span data-v-e09eaf05="">🔥 主流框架</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e09eaf05=""><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e09eaf05=""><div class="VPMenu" data-v-e09eaf05="" data-v-83538ad8=""><div class="items" data-v-83538ad8=""><!--[--><!--[--><div class="VPMenuLink" data-v-83538ad8="" data-v-32752aba=""><a class="VPLink link" href="index.html" data-v-32752aba=""><!--[-->React<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8="" data-v-32752aba=""><a class="VPLink link" href="../vue/index.html" data-v-32752aba=""><!--[-->Vue<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8="" data-v-32752aba=""><a class="VPLink link" href="../vitepress/index.html" data-v-32752aba=""><!--[-->VitePress<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8="" data-v-32752aba=""><a class="VPLink link" href="../nestjs/index.html" data-v-32752aba=""><!--[-->NestJs<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f18f6d8="" data-v-e09eaf05=""><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e09eaf05=""><span class="text" data-v-e09eaf05=""><!----><span data-v-e09eaf05="">🌵 专 栏</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e09eaf05=""><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e09eaf05=""><div class="VPMenu" data-v-e09eaf05="" data-v-83538ad8=""><div class="items" data-v-83538ad8=""><!--[--><!--[--><div class="VPMenuLink" data-v-83538ad8="" data-v-32752aba=""><a class="VPLink link" href="../../column/javascript/index.html" data-v-32752aba=""><!--[-->javascript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8="" data-v-32752aba=""><a class="VPLink link" href="../../column/git/index.html" data-v-32752aba=""><!--[-->git<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-83538ad8="" data-v-282f9473=""><p class="title" data-v-282f9473="">样式</p><!--[--><!--[--><div class="VPMenuLink" data-v-282f9473="" data-v-32752aba=""><a class="VPLink link" href="../../column/css/css/index.html" data-v-32752aba=""><!--[-->css<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-282f9473="" data-v-32752aba=""><a class="VPLink link" href="../../column/css/tailwindcss/index.html" data-v-32752aba=""><!--[-->tailwindcss<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-282f9473="" data-v-32752aba=""><a class="VPLink link" href="../../column/css/unocss/index.html" data-v-32752aba=""><!--[-->unocss<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="../../note/index.html" tabindex="0" data-v-6f18f6d8="" data-v-74d51423=""><!--[--><span data-v-74d51423="">📔 小 记</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-1ad84f55="" data-v-29d1e105=""><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-29d1e105="" data-v-742fbc76="" data-v-7e1f08b8=""><span class="check" data-v-7e1f08b8=""><span class="icon" data-v-7e1f08b8=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-742fbc76=""><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-742fbc76=""><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-1ad84f55="" data-v-1c6c3963="" data-v-9783732d=""><!--[--><a class="VPSocialLink no-icon" href="https://github.com/dapandocs/danpan-docs" aria-label="github" target="_blank" rel="noopener" data-v-9783732d="" data-v-329a054b=""><svg role="img" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-1ad84f55="" data-v-3f2e35ad="" data-v-e09eaf05=""><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e09eaf05=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-e09eaf05=""><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-e09eaf05=""><div class="VPMenu" data-v-e09eaf05="" data-v-83538ad8=""><!----><!--[--><!--[--><!----><div class="group" data-v-3f2e35ad=""><div class="item appearance" data-v-3f2e35ad=""><p class="label" data-v-3f2e35ad="">外观</p><div class="appearance-action" data-v-3f2e35ad=""><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-3f2e35ad="" data-v-742fbc76="" data-v-7e1f08b8=""><span class="check" data-v-7e1f08b8=""><span class="icon" data-v-7e1f08b8=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-742fbc76=""><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-742fbc76=""><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-3f2e35ad=""><div class="item social-links" data-v-3f2e35ad=""><div class="VPSocialLinks social-links-list" data-v-3f2e35ad="" data-v-9783732d=""><!--[--><a class="VPSocialLink no-icon" href="https://github.com/dapandocs/danpan-docs" aria-label="github" target="_blank" rel="noopener" data-v-9783732d="" data-v-329a054b=""><svg role="img" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-1ad84f55="" data-v-db42f22e=""><span class="container" data-v-db42f22e=""><span class="top" data-v-db42f22e=""></span><span class="middle" data-v-db42f22e=""></span><span class="bottom" data-v-db42f22e=""></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-6c29af8f="" data-v-f11df5b9=""><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f11df5b9=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-f11df5b9=""><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-f11df5b9="">目录</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-f11df5b9="" data-v-3a49c47c=""><button data-v-3a49c47c="">返回顶部</button><!----></div></div><aside class="VPSidebar" data-v-6c29af8f="" data-v-5505e66a=""><div class="curtain" data-v-5505e66a=""></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-5505e66a=""><span class="visually-hidden" id="sidebar-aria-label" data-v-5505e66a=""> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-5505e66a=""><section class="VPSidebarItem level-0 has-active" data-v-5505e66a="" data-v-1c083c26=""><div class="item" role="button" tabindex="0" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><h2 class="text" data-v-1c083c26="">React</h2><!----></div><div class="items" data-v-1c083c26=""><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="index.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">简述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="jsx.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">JSX 语法</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-1c083c26="" data-v-1c083c26=""><div class="item" role="button" tabindex="0" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><h3 class="text" data-v-1c083c26="">React Hooks</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-1c083c26=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-1c083c26=""><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-1c083c26=""><!--[--><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/use-state.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">useState</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/use-effect.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">useEffect</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/use-ref.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">useRef</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/memo.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">memo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/use-memo.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">useMemo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/use-callback.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">useCallback</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/use-context.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">useContext</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/forward-ref.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">forwardRef</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/use-reducer.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">useReducer</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/use-imperative-handle.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">useImperativeHandle</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="hooks/use-deferred-value.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">useDeferredValue</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="code-splitting.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">代码分割（Code Splitting）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="life-cycle.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">React 生命周期</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="render-order.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">父子组件的渲染顺序</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">React18 新特性</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="strict-mode.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">React18 严格模式</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-1c083c26="" data-v-1c083c26=""><div class="item" role="button" tabindex="0" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><h3 class="text" data-v-1c083c26="">React18 源码解析系列</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-1c083c26=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-1c083c26=""><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-1c083c26=""><!--[--><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="scanalysis/react-window.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">React Debug 配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="scanalysis/jsx.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">React.createElement 和 jsx()</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="scanalysis/create-root.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">createRoot 相关</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-5505e66a=""><section class="VPSidebarItem level-0" data-v-5505e66a="" data-v-1c083c26=""><div class="item" role="button" tabindex="0" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><h2 class="text" data-v-1c083c26="">React-Router</h2><!----></div><div class="items" data-v-1c083c26=""><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="react-router/index.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">简述</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-1c083c26="" data-v-1c083c26=""><div class="item" role="button" tabindex="0" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><h3 class="text" data-v-1c083c26="">Router Components</h3><!----></div><div class="items" data-v-1c083c26=""><!--[--><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="react-router/browser-router.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">BrowserRouter</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-1c083c26="" data-v-1c083c26=""><div class="item" role="button" tabindex="0" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><h3 class="text" data-v-1c083c26="">Components</h3><!----></div><div class="items" data-v-1c083c26=""><!--[--><div class="VPSidebarItem level-2 is-link" data-v-1c083c26="" data-v-1c083c26=""><div class="item" data-v-1c083c26=""><div class="indicator" data-v-1c083c26=""></div><a class="VPLink link link" href="react-router/routes.html" data-v-1c083c26=""><!--[--><p class="text" data-v-1c083c26="">Routes</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6c29af8f="" data-v-5f4fc72d=""><div class="VPDoc has-sidebar has-aside" data-v-5f4fc72d="" data-v-279178e3=""><!--[--><!--]--><div class="container" data-v-279178e3=""><div class="aside" data-v-279178e3=""><div class="aside-curtain" data-v-279178e3=""></div><div class="aside-container" data-v-279178e3=""><div class="aside-content" data-v-279178e3=""><div class="VPDocAside" data-v-279178e3="" data-v-38f8493b=""><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-38f8493b="" data-v-1be3d0f9=""><div class="content" data-v-1be3d0f9=""><div class="outline-marker" data-v-1be3d0f9=""></div><div class="outline-title" role="heading" aria-level="2" data-v-1be3d0f9="">大纲</div><nav aria-labelledby="doc-outline-aria-label" data-v-1be3d0f9=""><span class="visually-hidden" id="doc-outline-aria-label" data-v-1be3d0f9=""> Table of Contents for current page </span><ul class="root" data-v-1be3d0f9="" data-v-6b8ae2c9=""><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-38f8493b=""></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-279178e3=""><div class="content-container" data-v-279178e3=""><!--[--><!--]--><!----><main class="main" data-v-279178e3=""><div style="position:relative;" class="vp-doc _framework_react_new-features" data-v-279178e3=""><div><h1 id="react18-新特性" tabindex="-1">React18 新特性 <a class="header-anchor" href="#react18-新特性" aria-label="Permalink to &quot;React18 新特性&quot;">​</a></h1><h2 id="新特性" tabindex="-1">新特性 <a class="header-anchor" href="#新特性" aria-label="Permalink to &quot;新特性&quot;">​</a></h2><h3 id="render-api" tabindex="-1">Render API <a class="header-anchor" href="#render-api" aria-label="Permalink to &quot;Render API&quot;">​</a></h3><p>React 18 引入了一个新的渲染 API，名为 <code>createRoot</code>。这是与 React 17 和之前版本中的 <code>ReactDOM.render</code> 方法相对的。</p><h4 id="_1-createroot" tabindex="-1">1. createRoot <a class="header-anchor" href="#_1-createroot" aria-label="Permalink to &quot;1. createRoot&quot;">​</a></h4><ul><li>在 React 18 中，为了支持并发模式（Concurrent Mode），引入了新的 <code>createRoot</code> API。</li><li>使用这个 API，你可以创建一个 root，然后在这个 root 上调用 <code>render</code> 方法来渲染组件。</li><li>这种方式允许 React 在需要的时候中断渲染，从而实现更好的性能和用户体验。</li></ul><p>示例：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ReactDOM.</span><span style="color:#B392F0;">createRoot</span><span style="color:#E1E4E8;">(document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;root&quot;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">root.</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(&lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">root</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ReactDOM.</span><span style="color:#6F42C1;">createRoot</span><span style="color:#24292E;">(document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;root&quot;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">root.</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(&lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-reactdom-render" tabindex="-1">2. ReactDOM.render <a class="header-anchor" href="#_2-reactdom-render" aria-label="Permalink to &quot;2. ReactDOM.render&quot;">​</a></h4><ul><li>在 React 17 和之前的版本中，我们使用 <code>ReactDOM.render</code> 方法来渲染组件。</li><li>这种方式是同步的，意味着一旦开始渲染，就会阻塞主线程直到渲染完成。</li></ul><p>示例：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">ReactDOM.</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(&lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;, document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;root&quot;</span><span style="color:#E1E4E8;">));</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">ReactDOM.</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(&lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;, document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;root&quot;</span><span style="color:#24292E;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>React 18 的 <code>createRoot</code> API 是为了支持并发模式而引入的，它提供了一种新的、更灵活的方式来渲染组件，而 React 17 和之前的版本使用的是 <code>ReactDOM.render</code> 方法。</p><h3 id="setstate-自动批处理" tabindex="-1">setState 自动批处理 <a class="header-anchor" href="#setstate-自动批处理" aria-label="Permalink to &quot;setState 自动批处理&quot;">​</a></h3><p>在 React 中，<code>setState</code> 的行为是一个经常被讨论的话题。特别是关于它的异步性和自动批处理。让我们来看看 React 17 和 React 18 在这方面的差异。</p><h4 id="_1-react-17-及之前的版本" tabindex="-1">1. React 17 及之前的版本 <a class="header-anchor" href="#_1-react-17-及之前的版本" aria-label="Permalink to &quot;1. React 17 及之前的版本&quot;">​</a></h4><ul><li>在 React 17 及其之前的版本中，React 会在事件处理器（如点击事件）中自动批处理 <code>setState</code> 调用。这意味着，如果你在一个事件处理器中连续调用多次 <code>setState</code>，React 会将这些更新批量处理，从而只触发一次重新渲染。</li><li>但是，在异步代码 <code>setTimeout</code>、<code>Promise</code> 中，<code>setState</code> 不会被批处理，每次调用都会导致组件重新渲染。</li></ul><h4 id="_2-react-18" tabindex="-1">2. React 18 <a class="header-anchor" href="#_2-react-18" aria-label="Permalink to &quot;2. React 18&quot;">​</a></h4><ul><li>在 React 18 中，由于引入了并发模式，<code>setState</code> 的批处理行为得到了增强。</li><li>不仅在事件处理器中，而且在大多数场景下，包括异步代码，React 都会尝试批处理多个 <code>setState</code> 调用，从而减少不必要的重新渲染。</li><li>这为开发者提供了更一致的行为和更好的性能。</li></ul><p>React 18 在 <code>setState</code> 的自动批处理方面做了增强，使得在更多的场景下，连续的 <code>setState</code> 调用会被批量处理，从而减少不必要的渲染。</p><h4 id="例子" tabindex="-1">例子 <a class="header-anchor" href="#例子" aria-label="Permalink to &quot;例子&quot;">​</a></h4><p>当然可以，以下是 React 18 中函数组件的例子，展示了 React 事件处理函数、<code>setTimeout</code> 异步函数以及原生 JS 事件中的 <code>setState</code>（在函数组件中是 <code>useState</code> 的 setter 函数）批处理行为：</p><h5 id="react-事件处理函数" tabindex="-1">React 事件处理函数 <a class="header-anchor" href="#react-事件处理函数" aria-label="Permalink to &quot;React 事件处理函数&quot;">​</a></h5><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { useState } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ReactEventHandlerExample</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleClick</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 在React18和之前的版本中，这两次 setCount 调用都会被批处理，只触发一次重新渲染。</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleClick}&gt;Clicked {count} times&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { useState } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ReactEventHandlerExample</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleClick</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 在React18和之前的版本中，这两次 setCount 调用都会被批处理，只触发一次重新渲染。</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleClick}&gt;Clicked {count} times&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="settimeout-中的-setstate" tabindex="-1"><code>setTimeout</code> 中的 <code>setState</code> <a class="header-anchor" href="#settimeout-中的-setstate" aria-label="Permalink to &quot;`setTimeout` 中的 `setState`&quot;">​</a></h5><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { useState } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SetTimeoutExample</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleTimeout</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 在 React 17 和之前的版本中，这两次 setCount 调用不会被批处理，会触发两次重新渲染。</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 在 React 18 中，这两次 setCount 调用也会被批处理，只触发一次重新渲染。</span></span>
<span class="line"><span style="color:#E1E4E8;">    }, </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleTimeout}&gt;Increase after 1 second&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { useState } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SetTimeoutExample</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleTimeout</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setTimeout</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 在 React 17 和之前的版本中，这两次 setCount 调用不会被批处理，会触发两次重新渲染。</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 在 React 18 中，这两次 setCount 调用也会被批处理，只触发一次重新渲染。</span></span>
<span class="line"><span style="color:#24292E;">    }, </span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleTimeout}&gt;Increase after 1 second&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="原生-js-事件" tabindex="-1">原生 JS 事件 <a class="header-anchor" href="#原生-js-事件" aria-label="Permalink to &quot;原生 JS 事件&quot;">​</a></h5><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { useState, useEffect } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NativeEventExample</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">clicked</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setClicked</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">useEffect</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDocumentClick</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setClicked</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 在 React 17 和之前的版本中，这两次 setXXX 调用不会被批处理，会触发两次重新渲染。</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 在 React 18 中，这两次 setXXX 调用也会被批处理，只触发一次重新渲染。</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    document.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;click&quot;</span><span style="color:#E1E4E8;">, handleDocumentClick);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 清除事件监听器</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      document.</span><span style="color:#B392F0;">removeEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;click&quot;</span><span style="color:#E1E4E8;">, handleDocumentClick);</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;Document was clicked {count} times&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { useState, useEffect } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NativeEventExample</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">clicked</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setClicked</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">useEffect</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDocumentClick</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setClicked</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 在 React 17 和之前的版本中，这两次 setXXX 调用不会被批处理，会触发两次重新渲染。</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 在 React 18 中，这两次 setXXX 调用也会被批处理，只触发一次重新渲染。</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    document.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;click&quot;</span><span style="color:#24292E;">, handleDocumentClick);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 清除事件监听器</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      document.</span><span style="color:#6F42C1;">removeEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;click&quot;</span><span style="color:#24292E;">, handleDocumentClick);</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;Document was clicked {count} times&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>这些例子展示了在 React 18 中，无论是在 React 事件处理函数、<code>setTimeout</code> 异步函数还是原生 JS 事件中，连续的 <code>setState</code>（或 <code>setXXX</code>）调用都会被批处理，从而提高性能。</p><h3 id="flushsync" tabindex="-1">flushSync <a class="header-anchor" href="#flushsync" aria-label="Permalink to &quot;flushSync&quot;">​</a></h3><p><code>flushSync</code> 是一个 ReactDOM 的 API，它允许你在 React 17 和 React 18 中同步地执行某些操作，确保这些操作在当前的 JavaScript 执行堆栈中完成。这对于那些需要立即获取 DOM 更新结果的场景特别有用。</p><p>在 React 17 中，由于 React 的更新是同步的（除非在某些异步场景中），所以大多数情况下你可能不需要 <code>flushSync</code>。但在 React 18 中，由于引入了并发模式，某些更新可能会被延迟执行，这时 <code>flushSync</code> 就变得非常有用。</p><p>以下是 <code>flushSync</code> 的使用示例：</p><h3 id="_1-使用-flushsync-在函数组件中" tabindex="-1">1. 使用 <code>flushSync</code> 在函数组件中： <a class="header-anchor" href="#_1-使用-flushsync-在函数组件中" aria-label="Permalink to &quot;1. 使用 `flushSync` 在函数组件中：&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> ReactDOM </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleImmediateUpdate</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    ReactDOM.</span><span style="color:#B392F0;">flushSync</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    ReactDOM.</span><span style="color:#B392F0;">flushSync</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 在这里，count 的更新会立即被应用并重新渲染组件。不会批量更新。</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleImmediateUpdate}&gt;Increment&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> ReactDOM </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleImmediateUpdate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    ReactDOM.</span><span style="color:#6F42C1;">flushSync</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    ReactDOM.</span><span style="color:#6F42C1;">flushSync</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 在这里，count 的更新会立即被应用并重新渲染组件。不会批量更新。</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleImmediateUpdate}&gt;Increment&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>在上述示例中，当点击按钮时，<code>setCount</code> 更新会立即被应用，而不会被延迟。</p><p>但是在 <code>flushSync</code> 函数内部的多个 setState 仍然为批量更新。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> ReactDOM </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleImmediateUpdate</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    ReactDOM.</span><span style="color:#B392F0;">flushSync</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// flushSync 内部仍然批量更新</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleImmediateUpdate}&gt;Increment&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> ReactDOM </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleImmediateUpdate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    ReactDOM.</span><span style="color:#6F42C1;">flushSync</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// flushSync 内部仍然批量更新</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleImmediateUpdate}&gt;Increment&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>总的来说，<code>flushSync</code> 是一个强大的工具，但应该谨慎使用，因为过度使用可能会导致性能问题。它主要用于那些确实需要同步执行的场景。</p><h3 id="react-组件的返回值" tabindex="-1">React 组件的返回值 <a class="header-anchor" href="#react-组件的返回值" aria-label="Permalink to &quot;React 组件的返回值&quot;">​</a></h3><p>在 React 17 及之前的版本中，如果一个函数组件返回 <code>undefined</code>，React 会抛出一个错误。这是为了帮助开发者捕获可能的错误，因为在大多数情况下，组件不应该返回 <code>undefined</code>。</p><p>在 React 17 及之前的版本中，当函数组件返回 <code>undefined</code> 时，React 会抛出以下错误：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>但在 React 18 中，这一行为发生了变化。函数组件现在可以返回 <code>undefined</code> 而不会抛出错误。这意味着开发者可以更加灵活地定义组件，而不必担心意外返回 <code>undefined</code> 导致的错误。</p><p>总结：</p><ul><li>React 17 及之前：函数组件返回 <code>undefined</code> 会抛出错误。</li><li>React 18：函数组件返回 <code>undefined</code> 是允许的，不会抛出错误。</li></ul><h3 id="严格模式-strict-mode" tabindex="-1">严格模式 Strict Mode <a class="header-anchor" href="#严格模式-strict-mode" aria-label="Permalink to &quot;严格模式 Strict Mode&quot;">​</a></h3><p><code>StrictMode</code> 是一个用于突出显示应用程序中潜在问题的工具。它不会渲染任何可见的 UI，但会在渲染生命周期中激活额外的检查和警告。</p><p>让我们看一下 React 17 和 React 18 中 <code>StrictMode</code> 的主要差异：</p><h4 id="_1、react-17" tabindex="-1">1、React 17 <a class="header-anchor" href="#_1、react-17" aria-label="Permalink to &quot;1、React 17&quot;">​</a></h4><p><strong>检测不安全的生命周期</strong>：例如，<code>componentWillMount</code>、<code>componentWillReceiveProps</code> 和 <code>componentWillUpdate</code> 在严格模式下会触发警告，因为它们在未来的 React 版本中将被弃用。</p><p><strong>警告使用过时或废弃的 API</strong>。</p><p><strong>检测意外的副作用</strong>：在某些生命周期方法中，严格模式会故意两次调用它们，以帮助检测副作用。</p><p><strong>检测不推荐的 API 使用</strong>，如 <code>findDOMNode</code>。</p><p><strong>检测遗留的 context API</strong>。</p><h4 id="_2、react-18" tabindex="-1">2、React 18 <a class="header-anchor" href="#_2、react-18" aria-label="Permalink to &quot;2、React 18&quot;">​</a></h4><p>在 React 18 中，<code>StrictMode</code> 的行为基本上与 React 17 相同，但由于 React 18 引入了并发模式（Concurrent Mode），<code>StrictMode</code> 也开始检测与并发渲染相关的潜在问题。</p><p><strong>检测潜在的并发渲染问题</strong>：由于 React 18 支持并发模式，<code>StrictMode</code> 会检查代码中是否存在可能与并发渲染不兼容的模式。</p><p><strong>双重调用效果</strong>：为了检测副作用，React 18 在严格模式下可能会多次调用某些效果。</p><p>总的来说，React 18 的 <code>StrictMode</code> 在 React 17 的基础上增加了对并发模式的支持，并继续帮助开发者识别和修复潜在的问题。</p><h3 id="suspense-不再需要-fallback-来捕获" tabindex="-1">Suspense 不再需要 fallback 来捕获 <a class="header-anchor" href="#suspense-不再需要-fallback-来捕获" aria-label="Permalink to &quot;Suspense 不再需要 fallback 来捕获&quot;">​</a></h3><p>当然可以。以下是 React 18 与 React 17 在处理<code>null</code>或<code>undefined</code>的<code>Suspense</code> fallbacks 时的差异总结：</p><h4 id="react-17-及之前的版本" tabindex="-1">React 17 及之前的版本 <a class="header-anchor" href="#react-17-及之前的版本" aria-label="Permalink to &quot;React 17 及之前的版本&quot;">​</a></h4><ul><li>如果一个<code>Suspense</code>边界没有提供<code>fallback</code>（即<code>fallback</code>为<code>null</code>或<code>undefined</code>），React 会静默地跳过这个边界，并继续向上搜索下一个有<code>fallback</code>的<code>Suspense</code>边界。</li><li>例如：</li></ul><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fallback</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Loading</span><span style="color:#E1E4E8;"> /&gt;}&gt; // &lt;-- 这个边界被使用</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt; // &lt;-- 这个边界被跳过，因为没有fallback</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Page</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fallback</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Loading</span><span style="color:#24292E;"> /&gt;}&gt; // &lt;-- 这个边界被使用</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt; // &lt;-- 这个边界被跳过，因为没有fallback</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">Page</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在上述代码中，内部的<code>Suspense</code>边界没有提供<code>fallback</code>，所以 React 会跳过它并使用外部的<code>Suspense</code>边界的<code>fallback</code>。</p><h4 id="react-18" tabindex="-1">React 18 <a class="header-anchor" href="#react-18" aria-label="Permalink to &quot;React 18&quot;">​</a></h4><ul><li>在 React 18 中，即使一个<code>Suspense</code>边界的<code>fallback</code>为<code>null</code>或<code>undefined</code>，React 也会使用这个边界。在这种情况下，React 会为<code>fallback</code>渲染<code>null</code>，这意味着在数据加载期间不会显示任何内容。</li><li>例如：</li></ul><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fallback</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Loading</span><span style="color:#E1E4E8;"> /&gt;}&gt; // &lt;-- 这个边界不会被使用</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt; // &lt;-- 这个边界被使用，为fallback渲染null</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Page</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fallback</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Loading</span><span style="color:#24292E;"> /&gt;}&gt; // &lt;-- 这个边界不会被使用</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt; // &lt;-- 这个边界被使用，为fallback渲染null</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">Page</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在上述代码中，尽管内部的<code>Suspense</code>边界没有提供<code>fallback</code>，但 React 仍然会使用它。这意味着在<code>Page</code>组件的数据加载期间，不会显示任何内容（即<code>null</code>状态）。</p><p>这种变化确保了更加明确和一致的行为，特别是在开发和调试过程中。</p><h2 id="_3-个新的-api" tabindex="-1">3 个新的 API <a class="header-anchor" href="#_3-个新的-api" aria-label="Permalink to &quot;3 个新的 API&quot;">​</a></h2><h3 id="useid" tabindex="-1">useId <a class="header-anchor" href="#useid" aria-label="Permalink to &quot;useId&quot;">​</a></h3><p><code>useId</code> 是 React 18 中的一个新的 Hook，它用于生成在服务器和客户端之间稳定的唯一 ID，同时避免 hydration 不匹配。</p><p>以下是 <code>useId</code> 的一些使用场景：</p><ol><li><p><strong>基本使用</strong>：直接将生成的 id 传递给需要它的元素。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Checkbox</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useId</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">htmlFor</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id}&gt;Do you like React?&lt;/</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id} </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;checkbox&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Checkbox</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useId</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">label</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">htmlFor</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id}&gt;Do you like React?&lt;/</span><span style="color:#22863A;">label</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id} </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;checkbox&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p><strong>在同一个组件中使用多个 ID</strong>：使用相同的 id 附加一个后缀。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NameFields</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useId</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">htmlFor</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;-firstName&quot;</span><span style="color:#E1E4E8;">}&gt;First Name&lt;/</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;-firstName&quot;</span><span style="color:#E1E4E8;">} </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">htmlFor</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;-lastName&quot;</span><span style="color:#E1E4E8;">}&gt;Last Name&lt;/</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;-lastName&quot;</span><span style="color:#E1E4E8;">} </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NameFields</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useId</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">label</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">htmlFor</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;-firstName&quot;</span><span style="color:#24292E;">}&gt;First Name&lt;/</span><span style="color:#22863A;">label</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;-firstName&quot;</span><span style="color:#24292E;">} </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">label</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">htmlFor</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;-lastName&quot;</span><span style="color:#24292E;">}&gt;Last Name&lt;/</span><span style="color:#22863A;">label</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;-lastName&quot;</span><span style="color:#24292E;">} </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ol><p>需要注意的是：</p><ul><li><code>useId</code> 不用于在列表中生成键。键应该从您的数据中生成。</li><li><code>useId</code> 生成的字符串包括 <code>:</code> 令牌。这有助于确保令牌是唯一的，但在 CSS 选择器或像 <code>querySelectorAll</code> 这样的 API 中不受支持。</li><li><code>useId</code> 支持一个 <code>identifierPrefix</code> 以防止在多根应用程序中发生冲突。要配置此选项，可以查看 <code>hydrateRoot</code> 和 <code>ReactDOMServer</code> 的选项。</li></ul><h3 id="usesyncexternalstore" tabindex="-1">useSyncExternalStore <a class="header-anchor" href="#usesyncexternalstore" aria-label="Permalink to &quot;useSyncExternalStore&quot;">​</a></h3><p><code>useSyncExternalStore</code> 是 React 18 中引入的一个新的 Hook，它主要用于从外部数据源读取和订阅数据，同时与并发渲染功能（如选择性 hydration 和时间切片）兼容。</p><p>以下是 <code>useSyncExternalStore</code> 的一些使用场景：</p><ol><li><p><strong>基本使用</strong>：简单地订阅整个存储。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useSyncExternalStore</span><span style="color:#E1E4E8;">(store.subscribe, store.getSnapshot);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useSyncExternalStore</span><span style="color:#24292E;">(store.subscribe, store.getSnapshot);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>订阅特定字段</strong>：您还可以订阅特定的字段。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">selectedField</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useSyncExternalStore</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  store.subscribe,</span></span>
<span class="line"><span style="color:#E1E4E8;">  () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> store.</span><span style="color:#B392F0;">getSnapshot</span><span style="color:#E1E4E8;">().selectedField</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">selectedField</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useSyncExternalStore</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  store.subscribe,</span></span>
<span class="line"><span style="color:#24292E;">  () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> store.</span><span style="color:#6F42C1;">getSnapshot</span><span style="color:#24292E;">().selectedField</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p><strong>服务器渲染时的使用</strong>：在服务器渲染时，您必须序列化在服务器上使用的存储值，并将其提供给 <code>useSyncExternalStore</code>。React 将在 hydration 过程中使用此快照以防止服务器不匹配。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">selectedField</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useSyncExternalStore</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  store.subscribe,</span></span>
<span class="line"><span style="color:#E1E4E8;">  () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> store.</span><span style="color:#B392F0;">getSnapshot</span><span style="color:#E1E4E8;">().selectedField,</span></span>
<span class="line"><span style="color:#E1E4E8;">  () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">INITIAL_SERVER_SNAPSHOT</span><span style="color:#E1E4E8;">.selectedField</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">selectedField</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useSyncExternalStore</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  store.subscribe,</span></span>
<span class="line"><span style="color:#24292E;">  () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> store.</span><span style="color:#6F42C1;">getSnapshot</span><span style="color:#24292E;">().selectedField,</span></span>
<span class="line"><span style="color:#24292E;">  () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">INITIAL_SERVER_SNAPSHOT</span><span style="color:#24292E;">.selectedField</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol><p>需要注意的是：</p><ul><li><code>getSnapshot</code> 必须返回一个缓存值。如果连续多次调用 <code>getSnapshot</code>，除非在此期间有存储更新，否则它必须返回完全相同的值。</li></ul><h3 id="useinsertioneffect" tabindex="-1">useInsertionEffect <a class="header-anchor" href="#useinsertioneffect" aria-label="Permalink to &quot;useInsertionEffect&quot;">​</a></h3><p>useInsertionEffect 主要用途是在使用 useLayoutEffect 读取布局之前将样式注入到 DOM 中。</p><p>假设您正在使用一个 css-in-js 解决方案，并希望在组件渲染之前将某些样式注入到 DOM 中。您可以使用 <code>useInsertionEffect</code> 来确保样式在任何其他 DOM 读取或操作之前被注入。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useInsertionEffect } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MyComponent</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">useInsertionEffect</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 假设 `injectStyles` 是一个函数，它将样式注入到 DOM 中</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">injectStyles</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">`</span></span>
<span class="line"><span style="color:#9ECBFF;">      .my-class {</span></span>
<span class="line"><span style="color:#9ECBFF;">        color: red;</span></span>
<span class="line"><span style="color:#9ECBFF;">      }</span></span>
<span class="line"><span style="color:#9ECBFF;">    `</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">className</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;my-class&quot;</span><span style="color:#E1E4E8;">&gt;This text should be red.&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">injectStyles</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">css</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">style</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">createElement</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;style&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  style.type </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;text/css&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  style.</span><span style="color:#B392F0;">appendChild</span><span style="color:#E1E4E8;">(document.</span><span style="color:#B392F0;">createTextNode</span><span style="color:#E1E4E8;">(css));</span></span>
<span class="line"><span style="color:#E1E4E8;">  document.head.</span><span style="color:#B392F0;">appendChild</span><span style="color:#E1E4E8;">(style);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useInsertionEffect } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyComponent</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">useInsertionEffect</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 假设 `injectStyles` 是一个函数，它将样式注入到 DOM 中</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">injectStyles</span><span style="color:#24292E;">(</span><span style="color:#032F62;">`</span></span>
<span class="line"><span style="color:#032F62;">      .my-class {</span></span>
<span class="line"><span style="color:#032F62;">        color: red;</span></span>
<span class="line"><span style="color:#032F62;">      }</span></span>
<span class="line"><span style="color:#032F62;">    `</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;my-class&quot;</span><span style="color:#24292E;">&gt;This text should be red.&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">injectStyles</span><span style="color:#24292E;">(</span><span style="color:#E36209;">css</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">style</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">createElement</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;style&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  style.type </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;text/css&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  style.</span><span style="color:#6F42C1;">appendChild</span><span style="color:#24292E;">(document.</span><span style="color:#6F42C1;">createTextNode</span><span style="color:#24292E;">(css));</span></span>
<span class="line"><span style="color:#24292E;">  document.head.</span><span style="color:#6F42C1;">appendChild</span><span style="color:#24292E;">(style);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>在上面的示例中，<code>useInsertionEffect</code> 用于在组件渲染之前将 <code>.my-class</code> 的样式注入到 DOM 中。这确保了当组件的 DOM 被渲染时，相关的样式已经存在，从而避免了任何潜在的样式闪烁或不一致。</p><h2 id="并发模式-concurrent-mode" tabindex="-1">并发模式 Concurrent Mode <a class="header-anchor" href="#并发模式-concurrent-mode" aria-label="Permalink to &quot;并发模式 Concurrent Mode&quot;">​</a></h2><p>并发模式（Concurrent Mode）是 React 的一个新特性，它使 React 的渲染过程可以被中断和重新开始，从而优化应用的响应性和交互体验。</p><h3 id="为什么需要并发模式" tabindex="-1">为什么需要并发模式 <a class="header-anchor" href="#为什么需要并发模式" aria-label="Permalink to &quot;为什么需要并发模式&quot;">​</a></h3><p>在 React 17 之前，React 的渲染过程是同步的，即一旦开始渲染，就会一直执行到结束。这意味着，如果渲染过程中有一些耗时的任务，比如渲染大量的 DOM 节点，那么在渲染过程中，页面上的其他交互就会被阻塞，直到渲染完成。</p><p>这种同步渲染的方式，对于大多数应用来说，是没有问题的。但是，对于一些复杂的应用，比如有大量 DOM 节点的应用，或者有复杂计算的应用，同步渲染就会导致页面上的其他交互被阻塞，从而影响用户体验。</p><p>为了解决这个问题，React 18 引入了并发模式，使得 React 的渲染过程可以被中断和重新开始，从而优化应用的响应性和交互体验。</p><h3 id="并发特性" tabindex="-1">并发特性 <a class="header-anchor" href="#并发特性" aria-label="Permalink to &quot;并发特性&quot;">​</a></h3><p>React 18 中的并发模式，主要包含以下几个特性：</p><h4 id="usetransition" tabindex="-1">useTransition <a class="header-anchor" href="#usetransition" aria-label="Permalink to &quot;useTransition&quot;">​</a></h4><p><code>useTransition</code> 是 React 的一个 Hook，它允许组件避免不希望的加载状态，通过等待内容加载完成后再进行页面切换。它还允许组件将较慢的、需要数据获取的更新推迟到后续的渲染，从而可以立即渲染更关键的更新。</p><p>示例：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">resource</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setResource</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(initialResource);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">isPending</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">startTransition</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useTransition</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">button</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">disabled</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{isPending}</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">startTransition</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">nextUserId</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getNextId</span><span style="color:#E1E4E8;">(resource.userId);</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">setResource</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">fetchProfileData</span><span style="color:#E1E4E8;">(nextUserId));</span></span>
<span class="line"><span style="color:#E1E4E8;">          });</span></span>
<span class="line"><span style="color:#E1E4E8;">        }}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        Next</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      {isPending </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot; Loading...&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fallback</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Spinner</span><span style="color:#E1E4E8;"> /&gt;}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">ProfilePage</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">resource</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{resource} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">resource</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setResource</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(initialResource);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">isPending</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">startTransition</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useTransition</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">button</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">disabled</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{isPending}</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">startTransition</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">nextUserId</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getNextId</span><span style="color:#24292E;">(resource.userId);</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">setResource</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">fetchProfileData</span><span style="color:#24292E;">(nextUserId));</span></span>
<span class="line"><span style="color:#24292E;">          });</span></span>
<span class="line"><span style="color:#24292E;">        }}</span></span>
<span class="line"><span style="color:#24292E;">      &gt;</span></span>
<span class="line"><span style="color:#24292E;">        Next</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      {isPending </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot; Loading...&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fallback</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Spinner</span><span style="color:#24292E;"> /&gt;}&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#005CC5;">ProfilePage</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">resource</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{resource} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>在这段代码中，我们使用 <code>startTransition</code> 包裹了数据获取操作。这允许我们立即开始获取 profile 数据，同时推迟渲染下一个 profile 页面及其关联的 Spinner。<code>isPending</code> 布尔值让 React 知道我们的组件正在进行转换，因此我们可以通过在前一个 profile 页面上显示一些加载文本来通知用户。</p><p>简而言之，<code>useTransition</code> 提供了一种机制，使得在数据加载时，UI 可以保持响应并避免不必要的加载状态，从而提供更流畅的用户体验。</p><h4 id="usedeferredvalue" tabindex="-1">useDeferredValue <a class="header-anchor" href="#usedeferredvalue" aria-label="Permalink to &quot;useDeferredValue&quot;">​</a></h4><p><code>useDeferredValue</code> 是 React 的一个 Hook，它返回一个可能“滞后于”其原始值的延迟版本。</p><p><strong>使用场景</strong>： 当你有基于用户输入立即渲染的内容，以及需要等待数据获取的内容时，这个 Hook 通常很有用。它的主要目的是保持界面的响应性。</p><p><strong>示例</strong>：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">text</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setText</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;hello&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">deferredText</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useDeferredValue</span><span style="color:#E1E4E8;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">className</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;App&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span><span style="color:#6A737D;">/* 保持将当前文本传递给输入 */</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">value</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{text} </span><span style="color:#B392F0;">onChange</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleChange} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ...</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span><span style="color:#6A737D;">/* 但当有必要时，列表可以“滞后” */</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">MySlowList</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">text</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{deferredText} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">text</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setText</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;hello&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">deferredText</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useDeferredValue</span><span style="color:#24292E;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;App&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      {</span><span style="color:#6A737D;">/* 保持将当前文本传递给输入 */</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">value</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{text} </span><span style="color:#6F42C1;">onChange</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleChange} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      ...</span></span>
<span class="line"><span style="color:#24292E;">      {</span><span style="color:#6A737D;">/* 但当有必要时，列表可以“滞后” */</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">MySlowList</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">text</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{deferredText} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在此示例中，我们可以立即开始为输入显示新文本，使网页感觉响应迅速。与此同时，<code>MySlowList</code> “滞后”，允许它在后台使用当前文本进行渲染。</p><p>简而言之，<code>useDeferredValue</code> 允许某些 UI 部分立即响应用户输入，同时其他可能需要更多时间来更新的部分可以稍后渲染，从而提供更流畅的用户体验。</p><h2 id="react18-新特性流程图" tabindex="-1">React18 新特性流程图 <a class="header-anchor" href="#react18-新特性流程图" aria-label="Permalink to &quot;React18 新特性流程图&quot;">​</a></h2><div class="mermaid eita">null</div><h2 id="贡献者" tabindex="-1">贡献者 <a class="header-anchor" href="#贡献者" aria-label="Permalink to &quot;贡献者&quot;">​</a></h2><!----><!----><!----></div></div></main><footer class="VPDocFooter" data-v-279178e3="" data-v-3e3a0925=""><!--[--><!--]--><div class="edit-info" data-v-3e3a0925=""><div class="edit-link" data-v-3e3a0925=""><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/dapandocs/danpan-docs/blob/master/docs/framework/react/new-features.md" target="_blank" rel="noreferrer" data-v-3e3a0925=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-3e3a0925=""><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 为此页提供修改建议<!--]--></a></div><div class="last-updated" data-v-3e3a0925=""><p class="VPLastUpdated" data-v-3e3a0925="" data-v-da9c13a3="">最后一次更新于: <time datetime="2023-08-16T07:22:10.000Z" data-v-da9c13a3=""></time></p></div></div><nav class="prev-next" data-v-3e3a0925=""><div class="pager" data-v-3e3a0925=""><a class="pager-link prev" href="render-order.html" data-v-3e3a0925=""><span class="desc" data-v-3e3a0925="">上一篇</span><span class="title" data-v-3e3a0925="">父子组件的渲染顺序</span></a></div><div class="pager" data-v-3e3a0925=""><a class="pager-link next" href="strict-mode.html" data-v-3e3a0925=""><span class="desc" data-v-3e3a0925="">下一篇</span><span class="title" data-v-3e3a0925="">React18 严格模式</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-6c29af8f="" data-v-b52d1011=""><div class="container" data-v-b52d1011=""><p class="message" data-v-b52d1011="">前端全链路学习网站，欢迎 <a target="_blank" style="color: var(--vp-c-brand)" href="https://github.com/dapandocs/danpan-docs">star ⭐</a> 让更多人发现</p><p class="copyright" data-v-b52d1011=""><a target="_blank" href="https://beian.miit.gov.cn/">沪ICP备2023024648号-1</a> | 版权所有 © 2023 <a target="_blank" href="https://github.com/dapandocs/danpan-docs">Anthony dapan</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"column_css_tailwindcss_index.md\":\"864615d2\",\"column_css_css_index.md\":\"b533d26e\",\"framework_nestjs_index.md\":\"a8527daa\",\"column_css_css_multi-column-layout.md\":\"b8394bc6\",\"column_css_css_demos_2.md\":\"893afee6\",\"column_css_unocss_index.md\":\"b176eb5d\",\"column_javascript_index.md\":\"8595a6bb\",\"column_javascript_async-await.md\":\"cc02fcb5\",\"column_git_gitignore.md\":\"b634a867\",\"column_css_css_flex.md\":\"0b92d82d\",\"framework_react_hooks_use-context.md\":\"3f1295fa\",\"column_javascript_promise.md\":\"e846eab8\",\"framework_react_hooks_use-deferred-value.md\":\"faf1f89d\",\"framework_react_hooks_forward-ref.md\":\"5bc06347\",\"framework_react_react-router_index.md\":\"c8d51bf7\",\"framework_vitepress_algolia.md\":\"ba0df2b8\",\"framework_react_hooks_use-imperative-handle.md\":\"ce5b34e8\",\"system_index.md\":\"c4220321\",\"framework_react_hooks_use-state.md\":\"e2cba4fa\",\"framework_react_hooks_use-effect.md\":\"853531f8\",\"framework_react_react-router_routes.md\":\"03e241c8\",\"framework_react_render-order.md\":\"324a3ae8\",\"framework_vue_index.md\":\"178ef937\",\"framework_unocss_index.md\":\"33e05e3d\",\"framework_react_strict-mode.md\":\"d5dad8ec\",\"interview_basic_index.md\":\"e4f61559\",\"framework_vitepress_pwa.md\":\"66373bdc\",\"framework_react_hooks_use-memo.md\":\"24217afc\",\"framework_nestjs_ioc.md\":\"e210ddc4\",\"framework_react_scanalysis_jsx.md\":\"fa2bd0c4\",\"framework_react_hooks_use-reducer.md\":\"22a3c761\",\"note_eslint-prettier.md\":\"dfbce0a4\",\"note_index.md\":\"8e193cfe\",\"column_git_index.md\":\"6ce91377\",\"framework_react_code-splitting.md\":\"c0492c4b\",\"column_css_css_demos_1.md\":\"1b83ea95\",\"framework_react_life-cycle.md\":\"930df4de\",\"framework_vitepress_index.md\":\"7e040ab5\",\"framework_react_react-router_browser-router.md\":\"17b87d13\",\"framework_react_index.md\":\"5168796d\",\"framework_react_scanalysis_react-window.md\":\"9284663f\",\"framework_react_hooks_use-callback.md\":\"cb1525f0\",\"note_tsconfig.md\":\"68956f9b\",\"framework_react_jsx.md\":\"714631be\",\"framework_react_new-features.md\":\"b5a48712\",\"note_vscode-window.md\":\"12435112\",\"framework_react_hooks_use-ref.md\":\"5b912559\",\"index.md\":\"49df64c7\",\"framework_react_hooks_memo.md\":\"f1bb8450\",\"framework_react_scanalysis_create-root.md\":\"f123d1e1\",\"note_package-manager.md\":\"8f07264b\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"全栈小册\",\"description\":\"前端进阶开发技巧，浏览器扩展开发技巧，React与Vue开发技巧，前端全链路学习网站\",\"base\":\"/\",\"head\":[],\"appearance\":\"dark\",\"themeConfig\":{\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"GQMDRHPOC4\",\"apiKey\":\"0c8f6f8a3db63c9f73781b3268ae5179\",\"indexName\":\"skillgroup\",\"placeholder\":\"请输入关键词\",\"translations\":{\"button\":{\"buttonText\":\"请输入关键词\"}}}},\"sidebar\":{\"/framework/react\":[{\"text\":\"React\",\"items\":[{\"text\":\"简述\",\"link\":\"/framework/react/\"},{\"text\":\"JSX 语法\",\"link\":\"/framework/react/jsx\"},{\"text\":\"React Hooks\",\"collapsed\":true,\"items\":[{\"text\":\"useState\",\"link\":\"/framework/react/hooks/use-state\"},{\"text\":\"useEffect\",\"link\":\"/framework/react/hooks/use-effect\"},{\"text\":\"useRef\",\"link\":\"/framework/react/hooks/use-ref\"},{\"text\":\"memo\",\"link\":\"/framework/react/hooks/memo\"},{\"text\":\"useMemo\",\"link\":\"/framework/react/hooks/use-memo\"},{\"text\":\"useCallback\",\"link\":\"/framework/react/hooks/use-callback\"},{\"text\":\"useContext\",\"link\":\"/framework/react/hooks/use-context\"},{\"text\":\"forwardRef\",\"link\":\"/framework/react/hooks/forward-ref\"},{\"text\":\"useReducer\",\"link\":\"/framework/react/hooks/use-reducer\"},{\"text\":\"useImperativeHandle\",\"link\":\"/framework/react/hooks/use-imperative-handle\"},{\"text\":\"useDeferredValue\",\"link\":\"/framework/react/hooks/use-deferred-value\"}]},{\"text\":\"代码分割（Code Splitting）\",\"link\":\"/framework/react/code-splitting\"},{\"text\":\"React 生命周期\",\"link\":\"/framework/react/life-cycle\"},{\"text\":\"父子组件的渲染顺序\",\"link\":\"/framework/react/render-order\"},{\"text\":\"React18 新特性\",\"link\":\"/framework/react/new-features\"},{\"text\":\"React18 严格模式\",\"link\":\"/framework/react/strict-mode\"},{\"text\":\"React18 源码解析系列\",\"collapsed\":true,\"items\":[{\"text\":\"React Debug 配置\",\"link\":\"/framework/react/scanalysis/react-window\"},{\"text\":\"React.createElement 和 jsx()\",\"link\":\"/framework/react/scanalysis/jsx\"},{\"text\":\"createRoot 相关\",\"link\":\"/framework/react/scanalysis/create-root\"}]}]},{\"text\":\"React-Router\",\"items\":[{\"text\":\"简述\",\"link\":\"/framework/react/react-router/\"},{\"text\":\"Router Components\",\"items\":[{\"text\":\"BrowserRouter\",\"link\":\"/framework/react/react-router/browser-router\"}]},{\"text\":\"Components\",\"items\":[{\"text\":\"Routes\",\"link\":\"/framework/react/react-router/routes\"}]}]}],\"/framework/vitepress/\":[{\"text\":\"VitePress\",\"collapsed\":false,\"items\":[{\"text\":\"简述\",\"link\":\"/framework/vitepress/\"},{\"text\":\"开启 PWA\",\"link\":\"/framework/vitepress/pwa\"},{\"text\":\"添加 Algolia 搜索\",\"link\":\"/framework/vitepress/algolia\"}]}],\"/framework/nestjs/\":[{\"text\":\"NestJS\",\"collapsed\":false,\"items\":[{\"text\":\"简述\",\"link\":\"/framework/nestjs/\"},{\"text\":\"依赖注入（IOC）\",\"link\":\"/framework/nestjs/ioc\"}]}],\"/column/javascript/\":[{\"text\":\"JavaScript\",\"items\":[{\"text\":\"简述\",\"link\":\"/column/javascript/\"},{\"text\":\"Promise\",\"link\":\"/column/javascript/promise\"},{\"text\":\"async/await\",\"link\":\"/column/javascript/async-await\"}]}],\"/column/git/\":[{\"text\":\"Git\",\"items\":[{\"text\":\"简述\",\"link\":\"/column/git/\"},{\"text\":\".gitignore\",\"link\":\"/column/git/gitignore\"}]}],\"/column/css/css/\":[{\"text\":\"知识点\",\"items\":[{\"text\":\"简述\",\"link\":\"/column/css/css/\"},{\"text\":\"Flexbox（弹性盒子）\",\"link\":\"/column/css/css/flex\"},{\"text\":\"CSS 多列布局\",\"link\":\"/column/css/css/multi-column-layout\"}]},{\"text\":\"案例灵感\",\"items\":[{\"text\":\"实现水平垂直居中最便捷的方法\",\"link\":\"/column/css/css/demos/1\"},{\"text\":\"flex 实现三列布局\",\"link\":\"/column/css/css/demos/2\"}]}],\"/column/css/tailwindcss/\":[{\"text\":\"tailwindcss\",\"items\":[{\"text\":\"简述\",\"link\":\"/column/css/tailwindcss/\"}]}],\"/column/css/unocss/\":[{\"text\":\"unocss\",\"items\":[{\"text\":\"简述\",\"link\":\"/column/css/unocss/\"}]}],\"/note/\":[{\"text\":\"小 记\",\"collapsed\":false,\"items\":[{\"text\":\"简述\",\"link\":\"/note/\"},{\"text\":\"node 包管理器\",\"link\":\"/note/package-manager\"},{\"text\":\"vscode window 用法\",\"link\":\"/note/vscode-window\"},{\"text\":\"eslint、prettier 用法\",\"link\":\"/note/eslint-prettier\"},{\"text\":\"tsconfig.json 用法\",\"link\":\"/note/tsconfig\"}]}]},\"footer\":{\"message\":\"前端全链路学习网站，欢迎 <a target=\\\"_blank\\\" style=\\\"color: var(--vp-c-brand)\\\" href=\\\"https://github.com/dapandocs/danpan-docs\\\">star ⭐</a> 让更多人发现\",\"copyright\":\"<a target=\\\"_blank\\\" href=\\\"https://beian.miit.gov.cn/\\\">沪ICP备2023024648号-1</a> | 版权所有 © 2023 <a target=\\\"_blank\\\" href=\\\"https://github.com/dapandocs/danpan-docs\\\">Anthony dapan</a>\"},\"nav\":[{\"text\":\"🔥 主流框架\",\"items\":[{\"text\":\"React\",\"link\":\"/framework/react/\"},{\"text\":\"Vue\",\"link\":\"/framework/vue/\"},{\"text\":\"VitePress\",\"link\":\"/framework/vitepress/\"},{\"text\":\"NestJs\",\"link\":\"/framework/nestjs/\"}]},{\"text\":\"🌵 专 栏\",\"items\":[{\"text\":\"javascript\",\"link\":\"/column/javascript/\"},{\"text\":\"git\",\"link\":\"/column/git/\"},{\"text\":\"样式\",\"items\":[{\"text\":\"css\",\"link\":\"/column/css/css/\"},{\"text\":\"tailwindcss\",\"link\":\"/column/css/tailwindcss/\"},{\"text\":\"unocss\",\"link\":\"/column/css/unocss/\"}]}]},{\"text\":\"📔 小 记\",\"link\":\"/note/\"}],\"logo\":\"../../logo.svg\",\"lastUpdatedText\":\"最后一次更新于\",\"outline\":\"deep\",\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"returnToTopLabel\":\"返回顶部\",\"outlineTitle\":\"大纲\",\"darkModeSwitchLabel\":\"外观\",\"sidebarMenuLabel\":\"目录\",\"editLink\":{\"pattern\":\"https://github.com/dapandocs/danpan-docs/blob/master/docs/:path\",\"text\":\"为此页提供修改建议\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/dapandocs/danpan-docs\"}]},\"locales\":{\"root\":{\"label\":\"简体中文\",\"lang\":\"zh-CN\"}},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>