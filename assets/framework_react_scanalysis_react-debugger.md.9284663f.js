import{_ as i,a as E,b as y}from"./chunks/Contributors.vue_vue_type_script_setup_true_lang.052e419c.js";import{_ as u,C as d,o as b,c as m,H as s,w as n,Q as p,k as e,a as o}from"./chunks/framework.27021b64.js";import{_ as h}from"./chunks/index.e5e15ed4.js";import"./chunks/CloseOutlined.9c3246b4.js";import"./chunks/isObjectLike.46b91259.js";import"./chunks/Serializer.fad5b415.js";import"./chunks/LeftOutlined.9040821c.js";import"./chunks/EyeOutlined.53cc40ff.js";const $=JSON.parse('{"title":"React 18 window 源码分析配置","description":"","frontmatter":{},"headers":[],"relativePath":"framework/react/scanalysis/react-window.md","filePath":"framework/react/scanalysis/react-window.md","lastUpdated":1690252571000}'),F={name:"framework/react/scanalysis/react-window.md"},g=p(`<h1 id="react-18-window-源码分析配置" tabindex="-1">React 18 window 源码分析配置 <a class="header-anchor" href="#react-18-window-源码分析配置" aria-label="Permalink to &quot;React 18 window 源码分析配置&quot;">​</a></h1><h2 id="github-地址" tabindex="-1">Github 地址 <a class="header-anchor" href="#github-地址" aria-label="Permalink to &quot;Github 地址&quot;">​</a></h2><p><a href="https://github.com/dapandocs/react-window" target="_blank" rel="noreferrer">react-window</a></p><h2 id="创建项目" tabindex="-1">创建项目 <a class="header-anchor" href="#创建项目" aria-label="Permalink to &quot;创建项目&quot;">​</a></h2><h3 id="_1-vite-创建-react-项目" tabindex="-1">1. vite 创建 react 项目 <a class="header-anchor" href="#_1-vite-创建-react-项目" aria-label="Permalink to &quot;1. vite 创建 react 项目&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vite</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">react-window</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--template</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">react</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">vite</span><span style="color:#24292E;"> </span><span style="color:#032F62;">react-window</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--template</span><span style="color:#24292E;"> </span><span style="color:#032F62;">react</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-下载-react-最新源码" tabindex="-1">2. 下载 react 最新源码 <a class="header-anchor" href="#_2-下载-react-最新源码" aria-label="Permalink to &quot;2. 下载 react 最新源码&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 下载时间为 20230720 react 版本为 &quot;version&quot;: &quot;18.2.0&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">git clone </span><span style="color:#B392F0;">https</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//github.com/facebook/react.git</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 下载时间为 20230720 react 版本为 &quot;version&quot;: &quot;18.2.0&quot;</span></span>
<span class="line"><span style="color:#24292E;">git clone </span><span style="color:#6F42C1;">https</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//github.com/facebook/react.git</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-将-react-源码中的包移动到我们的项目中-src-react-packages-xxx" tabindex="-1">3. 将 react 源码中的包移动到我们的项目中 src/react/packages/xxx <a class="header-anchor" href="#_3-将-react-源码中的包移动到我们的项目中-src-react-packages-xxx" aria-label="Permalink to &quot;3. 将 react 源码中的包移动到我们的项目中 src/react/packages/xxx&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 需要移动的包</span></span>
<span class="line"><span style="color:#E1E4E8;">react;</span></span>
<span class="line"><span style="color:#E1E4E8;">react </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> dom;</span></span>
<span class="line"><span style="color:#E1E4E8;">react </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> dom </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> bindings;</span></span>
<span class="line"><span style="color:#E1E4E8;">react </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> reconciler;</span></span>
<span class="line"><span style="color:#E1E4E8;">scheduler;</span></span>
<span class="line"><span style="color:#E1E4E8;">shared;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 需要移动的包</span></span>
<span class="line"><span style="color:#24292E;">react;</span></span>
<span class="line"><span style="color:#24292E;">react </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> dom;</span></span>
<span class="line"><span style="color:#24292E;">react </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> dom </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> bindings;</span></span>
<span class="line"><span style="color:#24292E;">react </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> reconciler;</span></span>
<span class="line"><span style="color:#24292E;">scheduler;</span></span>
<span class="line"><span style="color:#24292E;">shared;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_4-配置-vite-config-js" tabindex="-1">4. 配置 vite.config.js <a class="header-anchor" href="#_4-配置-vite-config-js" aria-label="Permalink to &quot;4. 配置 vite.config.js&quot;">​</a></h3><p>增加别名和环境变量，如下：</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { defineConfig } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;vite&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> react </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@vitejs/plugin-react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> path </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;path&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// https://vitejs.dev/config/</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">defineConfig</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  plugins: [</span><span style="color:#B392F0;">react</span><span style="color:#E1E4E8;">()],</span></span>
<span class="line"><span style="color:#E1E4E8;">  resolve: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 配置别名</span></span>
<span class="line"><span style="color:#E1E4E8;">    alias: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      react: path.posix.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;src/react/packages/react&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">: path.posix.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;src/react/packages/react-dom&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;react-dom-bindings&quot;</span><span style="color:#E1E4E8;">: path.posix.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;src/react/packages/react-dom-bindings&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ),</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;react-reconciler&quot;</span><span style="color:#E1E4E8;">: path.posix.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;src/react/packages/react-reconciler&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ),</span></span>
<span class="line"><span style="color:#E1E4E8;">      scheduler: path.posix.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;src/react/packages/scheduler&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">      shared: path.posix.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;src/react/packages/shared&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 配置环境变量，解决__DEV__ is not defined</span></span>
<span class="line"><span style="color:#E1E4E8;">  define: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    __DEV__: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 设置为false跳过 if(__dev__)的开发逻辑 这样会报错 需要修改jsx_dev的引入</span></span>
<span class="line"><span style="color:#E1E4E8;">    __EXPERIMENTAL__: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    __PROFILE__: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { defineConfig } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;vite&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> react </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@vitejs/plugin-react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> path </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;path&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// https://vitejs.dev/config/</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">defineConfig</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  plugins: [</span><span style="color:#6F42C1;">react</span><span style="color:#24292E;">()],</span></span>
<span class="line"><span style="color:#24292E;">  resolve: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 配置别名</span></span>
<span class="line"><span style="color:#24292E;">    alias: {</span></span>
<span class="line"><span style="color:#24292E;">      react: path.posix.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;src/react/packages/react&quot;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">: path.posix.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;src/react/packages/react-dom&quot;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;react-dom-bindings&quot;</span><span style="color:#24292E;">: path.posix.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;src/react/packages/react-dom-bindings&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ),</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;react-reconciler&quot;</span><span style="color:#24292E;">: path.posix.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;src/react/packages/react-reconciler&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ),</span></span>
<span class="line"><span style="color:#24292E;">      scheduler: path.posix.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;src/react/packages/scheduler&quot;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">      shared: path.posix.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;src/react/packages/shared&quot;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 配置环境变量，解决__DEV__ is not defined</span></span>
<span class="line"><span style="color:#24292E;">  define: {</span></span>
<span class="line"><span style="color:#24292E;">    __DEV__: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 设置为false跳过 if(__dev__)的开发逻辑 这样会报错 需要修改jsx_dev的引入</span></span>
<span class="line"><span style="color:#24292E;">    __EXPERIMENTAL__: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    __PROFILE__: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>如果要设置<code>__DEV__</code>为 false，需要调整以下代码：</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// src/react/packages/react/src/jsx/ReactJSX.js</span></span>
<span class="line"><span style="color:#6A737D;">// 修改后</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { REACT_FRAGMENT_TYPE } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;shared/ReactSymbols&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  jsxWithValidationStatic,</span></span>
<span class="line"><span style="color:#E1E4E8;">  jsxWithValidationDynamic,</span></span>
<span class="line"><span style="color:#E1E4E8;">  jsxWithValidation,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;./ReactJSXElementValidator&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { jsx </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> jsxProd } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;./ReactJSXElement&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">jsx</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> __DEV__ </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> jsxWithValidationDynamic </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> jsxProd;</span></span>
<span class="line"><span style="color:#6A737D;">// we may want to special case jsxs internally to take advantage of static children.</span></span>
<span class="line"><span style="color:#6A737D;">// for now we can ship identical prod functions</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">jsxs</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> __DEV__ </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> jsxWithValidationStatic </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> jsxProd;</span></span>
<span class="line"><span style="color:#6A737D;">// const jsxDEV      = __DEV__ ? jsxWithValidation : undefined; // 隐藏</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">jsxDEV</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> jsxProd; </span><span style="color:#6A737D;">// 增加</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> { REACT_FRAGMENT_TYPE </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> Fragment, jsx, jsxs, jsxDEV };</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// src/react/packages/react/src/jsx/ReactJSX.js</span></span>
<span class="line"><span style="color:#6A737D;">// 修改后</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { REACT_FRAGMENT_TYPE } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;shared/ReactSymbols&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  jsxWithValidationStatic,</span></span>
<span class="line"><span style="color:#24292E;">  jsxWithValidationDynamic,</span></span>
<span class="line"><span style="color:#24292E;">  jsxWithValidation,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./ReactJSXElementValidator&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { jsx </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> jsxProd } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./ReactJSXElement&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">jsx</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> __DEV__ </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> jsxWithValidationDynamic </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> jsxProd;</span></span>
<span class="line"><span style="color:#6A737D;">// we may want to special case jsxs internally to take advantage of static children.</span></span>
<span class="line"><span style="color:#6A737D;">// for now we can ship identical prod functions</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">jsxs</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> __DEV__ </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> jsxWithValidationStatic </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> jsxProd;</span></span>
<span class="line"><span style="color:#6A737D;">// const jsxDEV      = __DEV__ ? jsxWithValidation : undefined; // 隐藏</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">jsxDEV</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> jsxProd; </span><span style="color:#6A737D;">// 增加</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> { REACT_FRAGMENT_TYPE </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> Fragment, jsx, jsxs, jsxDEV };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>如果需要配置未生效时，可以尝试删除node_modules/.vite文件夹，重新启动项目</p><p>react 包移动完成后目录如下：</p>`,17),q=p(`<h3 id="_5-配置-jsconfig-json" tabindex="-1">5. 配置 jsconfig.json <a class="header-anchor" href="#_5-配置-jsconfig-json" aria-label="Permalink to &quot;5. 配置 jsconfig.json&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 给vscode编辑器使用</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;compilerOptions&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;baseUrl&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;./&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;paths&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;react/*&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;src/react/packages/react/*&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;react-dom/*&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;src/react/packages/react-dom/*&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;react-dom-bindings/*&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;src/react/packages/react-dom-bindings/*&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;react-reconciler/*&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;src/react/packages/react-reconciler/*&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;scheduler/*&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;src/react/packages/scheduler/*&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;shared/*&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;src/react/packages/shared/*&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;exclude&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;node_modules&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;dist&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 给vscode编辑器使用</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;compilerOptions&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;baseUrl&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;./&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;paths&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;react/*&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;src/react/packages/react/*&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;react-dom/*&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;src/react/packages/react-dom/*&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;react-dom-bindings/*&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;src/react/packages/react-dom-bindings/*&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;react-reconciler/*&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;src/react/packages/react-reconciler/*&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;scheduler/*&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;src/react/packages/scheduler/*&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;shared/*&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;src/react/packages/shared/*&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;exclude&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;node_modules&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;dist&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_6-开启-window" tabindex="-1">6. 开启 window <a class="header-anchor" href="#_6-开启-window" aria-label="Permalink to &quot;6. 开启 window&quot;">​</a></h3>`,3),_=p(`<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 使用 IntelliSense 了解相关属性。</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 悬停以查看现有属性的描述。</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;version&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;0.2.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;configurations&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;chrome&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;request&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;launch&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;针对 localhost 启动 Chrome&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;url&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;http://localhost:5173&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;webRoot&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;\${workspaceFolder}&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 使用 IntelliSense 了解相关属性。</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 悬停以查看现有属性的描述。</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;version&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;0.2.0&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;configurations&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;chrome&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;request&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;launch&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;name&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;针对 localhost 启动 Chrome&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;url&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;http://localhost:5173&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;webRoot&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;\${workspaceFolder}&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    ]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_7-启动项目" tabindex="-1">7. 启动项目 <a class="header-anchor" href="#_7-启动项目" aria-label="Permalink to &quot;7. 启动项目&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm run dev</span></span>
<span class="line"><span style="color:#E1E4E8;">或</span></span>
<span class="line"><span style="color:#E1E4E8;">yarn dev</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm run dev</span></span>
<span class="line"><span style="color:#24292E;">或</span></span>
<span class="line"><span style="color:#24292E;">yarn dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="处理报错" tabindex="-1">处理报错 <a class="header-anchor" href="#处理报错" aria-label="Permalink to &quot;处理报错&quot;">​</a></h2><h3 id="_1-import-type-reactnodelist-from-shared-reacttypes" tabindex="-1">1. import type {ReactNodeList} from &#39;shared/ReactTypes&#39;; <a class="header-anchor" href="#_1-import-type-reactnodelist-from-shared-reacttypes" aria-label="Permalink to &quot;1. import type {ReactNodeList} from &#39;shared/ReactTypes&#39;;&quot;">​</a></h3><p>报错如下：</p>`,6),f=p('<p>解决办法：</p><ul><li>安装 flow-remove-types</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">yarn add flow</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">remove</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">types </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">D</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">yarn add flow</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">remove</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">types </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>执行命令</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npx flow</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">remove</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">types </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">out</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">dir src</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">react src</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">react</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npx flow</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">remove</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">types </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">out</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">dir src</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">react src</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">react</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>执行完成后，如下：</p>',6),C=e("h3",{id:"_2-no-matching-export-in-src-react-packages-react-dom-client-js-for-import-default",tabindex:"-1"},[o('2. No matching export in "src/react/packages/react-dom/client.js" for import "default" '),e("a",{class:"header-anchor",href:"#_2-no-matching-export-in-src-react-packages-react-dom-client-js-for-import-default","aria-label":'Permalink to "2. No matching export in "src/react/packages/react-dom/client.js" for import "default""'},"​")],-1),D=e("p",null,"报错如下：",-1),v=p(`<p>解决办法： 查看 client 文件是 export 到处的，所以需要修改引入方式</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> React </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// import React from &quot;react&quot;;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> ReactDOM </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-dom/client&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// import ReactDOM from &quot;react-dom/client&quot;;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> App </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;./App.tsx&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;./index.css&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">ReactDOM.</span><span style="color:#B392F0;">createRoot</span><span style="color:#E1E4E8;">(document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;root&quot;</span><span style="color:#E1E4E8;">)).</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">React.StrictMode</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">React.StrictMode</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> React </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// import React from &quot;react&quot;;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> ReactDOM </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-dom/client&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// import ReactDOM from &quot;react-dom/client&quot;;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> App </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./App.tsx&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./index.css&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ReactDOM.</span><span style="color:#6F42C1;">createRoot</span><span style="color:#24292E;">(document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;root&quot;</span><span style="color:#24292E;">)).</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">React.StrictMode</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#005CC5;">React.StrictMode</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3-the-requested-module-src-react-packages-react-reconciler-src-reactfiberconfig-js-does-not-provide-an-export-named-getchildhostcontext" tabindex="-1">3. The requested module &#39;/src/react/packages/react-reconciler/src/ReactFiberConfig.js&#39; does not provide an export named &#39;getChildHostContext&#39; <a class="header-anchor" href="#_3-the-requested-module-src-react-packages-react-reconciler-src-reactfiberconfig-js-does-not-provide-an-export-named-getchildhostcontext" aria-label="Permalink to &quot;3. The requested module &#39;/src/react/packages/react-reconciler/src/ReactFiberConfig.js&#39; does not provide an export named &#39;getChildHostContext&#39;&quot;">​</a></h3><p>报错如下：</p>`,4),A=p(`<p>解决办法 src/react/packages/react-reconciler/src/ReactFiberConfig.js 更改后如下：</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// src/react/packages/react-reconciler/src/ReactFiberConfig.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * Copyright (c) Meta Platforms, Inc. and affiliates.</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> * This source code is licensed under the MIT license found in the</span></span>
<span class="line"><span style="color:#6A737D;"> * LICENSE file in the root directory of this source tree.</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// We expect that our Rollup, Jest, and Flow configurations</span></span>
<span class="line"><span style="color:#6A737D;">// always shim this module with the corresponding host config</span></span>
<span class="line"><span style="color:#6A737D;">// (either provided by a renderer, or a generic shim for npm).</span></span>
<span class="line"><span style="color:#6A737D;">//</span></span>
<span class="line"><span style="color:#6A737D;">// We should never resolve to this file, but it exists to make</span></span>
<span class="line"><span style="color:#6A737D;">// sure that if we *do* accidentally break the configuration,</span></span>
<span class="line"><span style="color:#6A737D;">// the failure isn&#39;t silent.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// throw new Error(&#39;This module must be shimmed by a specific renderer.&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 引入文件</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;./forks/ReactFiberConfig.dom-browser&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 其实就是</span></span>
<span class="line"><span style="color:#6A737D;">// export * from &#39;react-dom-bindings/src/client/ReactDOMHostConfig&#39;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// src/react/packages/react-reconciler/src/ReactFiberConfig.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * Copyright (c) Meta Platforms, Inc. and affiliates.</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> * This source code is licensed under the MIT license found in the</span></span>
<span class="line"><span style="color:#6A737D;"> * LICENSE file in the root directory of this source tree.</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// We expect that our Rollup, Jest, and Flow configurations</span></span>
<span class="line"><span style="color:#6A737D;">// always shim this module with the corresponding host config</span></span>
<span class="line"><span style="color:#6A737D;">// (either provided by a renderer, or a generic shim for npm).</span></span>
<span class="line"><span style="color:#6A737D;">//</span></span>
<span class="line"><span style="color:#6A737D;">// We should never resolve to this file, but it exists to make</span></span>
<span class="line"><span style="color:#6A737D;">// sure that if we *do* accidentally break the configuration,</span></span>
<span class="line"><span style="color:#6A737D;">// the failure isn&#39;t silent.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// throw new Error(&#39;This module must be shimmed by a specific renderer.&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 引入文件</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./forks/ReactFiberConfig.dom-browser&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 其实就是</span></span>
<span class="line"><span style="color:#6A737D;">// export * from &#39;react-dom-bindings/src/client/ReactDOMHostConfig&#39;;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>上述问题解决后，就可以正常调试了</p>`,3),k=e("h2",{id:"贡献者",tabindex:"-1"},[o("贡献者 "),e("a",{class:"header-anchor",href:"#贡献者","aria-label":'Permalink to "贡献者"'},"​")],-1);function x(j,B,R,T,w,P){const l=h,a=d("ClientOnly"),t=i,c=E,r=y;return b(),m("div",null,[g,s(a,null,{default:n(()=>[s(l,{src:"/images/react/1.png",alt:"react 目录"})]),_:1}),q,s(a,null,{default:n(()=>[s(l,{src:"/images/react/7.png",alt:"window"})]),_:1}),_,s(a,null,{default:n(()=>[s(l,{src:"/images/react/2.png",alt:"shared/ReactTypes"})]),_:1}),f,s(a,null,{default:n(()=>[s(l,{src:"/images/react/3.png",alt:"flow-remove-types"})]),_:1}),C,D,s(a,null,{default:n(()=>[s(l,{src:"/images/react/4.png",alt:"react-dom/client"})]),_:1}),v,s(a,null,{default:n(()=>[s(l,{src:"/images/react/5.png",alt:"react-dom/client"})]),_:1}),A,s(a,null,{default:n(()=>[s(l,{src:"/images/react/6.png",alt:"正常"})]),_:1}),k,s(a,null,{default:n(()=>[s(t)]),_:1}),s(a,null,{default:n(()=>[s(c)]),_:1}),s(a,null,{default:n(()=>[s(r)]),_:1})])}const L=u(F,[["render",x]]);export{$ as __pageData,L as default};
